# Ng 使用笔记
记录使用 AngularJS 学习和遇到的零碎知识点。

与 `jQuery` 不同，`AngularJS` 不是一个JS函数库，而是一个JS结构化框架，其中的所有DOM操作都是在指令中进行的。

## ng-app 指令
 * `ng-app` 指令用于告诉 `AngularJS` 应用当前这个元素是根元素。
 * HTML文档中必有且只能有一个 `ng-app` 指令，如果有多个 `ng-app` 指令，则只有第一个会被使用。

## ng-model 指令
 * `ng-model` 指令绑定了HTML表单元素到 `scope` 变量中，如果 `scope` 中不存在变量, 将会创建它。
 * `<input>`, `<select>`, `<textarea>`, 元素支持该指令。

## 表达式
 * 表达式通常是有一个返回值，可以放在任何需要值的地方，比如函数的参数，一个变量名，一个运算。
 * 语句通常表示一个完整的执行单位，一段完整的 `js` 可执行代码，有的语句也可以用表达式来执行，叫做表达式语句。
 * `AngularJS` 中的语句用双重花括号来包含，写在页面中用来显示数据，写在花括号中的变量会从作用域对象上获取。

## 控制器
 * 控制器是用来控制 `AngularJS` 应用数据的实例对象。
 * `ng-controller` 指令用来指定控制器的构造函数，`Angular` 会自动 `new` 此函数创建控制对象。
 * 在控制器函数中必须申明一个形参($scope)，然后 `Angular` 会自动将 `$scope` 对象传入。
 * 同时 `Angular` 还会创建一个新的作用域对象($scope)，它是根作用域对象($rootScope)的子对象。
 * 出于内存占用和性能的考虑，控制器只会在需要时被实例化，并且不再需要就会被销毁。这意味着每次切换路由或重新加载视图时，当前的控制器会被 `AngularJS` 清除掉。

## 服务
 * 因为服务是单例对象，创建服务时指定的函数在应用的生命周期内只会被调用一次。
 * 服务提供了一种能在应用的整个生命周期内保持数据的方法，它能够在控制器之间进行通信，并且能保证数据的一致性。

## 模块对象
 * 用 `angular.module` 来注册和检索模块。
 * 模块对象上有 `controller` 方法用于创建控制器，该方法返回模块对象，所以可以进行链式创建控制器。
 * 在创建控制器时，我们必须为控制器的函数声明依赖注入 $`scope`，然而当项目打包后，函数中的所有形参都会被替换(通常会是 a,b,c 等)，这时 `AngularJS` 执行时就会报错，为了解决这个问题 `AngularJS` 提出了显示声明依赖注入的方法代替之前隐式声明依赖注入的方法。

```javascript
// 隐式声明依赖注入的方法
function MyCtrl ($scope) {
    $scope.sayHello = 'Hello world!';
}

// 显示声明依赖注入的方法
angular.module('MyCtrl', ['$scope', function MyCtrl ($scope) {
    // 因为数组中基本类型的值是不会被打包改变的，所以可以将依赖显式地写在数组中
    // AngularJS 会查找数组中的值对应注入依赖
    $scope.sayHello = 'Hello world!';
}]);
```

## 提示
 * 不推荐在控制器中使用 `$watch`，在实际生产中会在指令中设置 `$watch`。

## 在页面给变量默认值?

```html
{% raw %}<img ng-src="./img/{{pathVariable || 'default'}}.png">{% endraw %}
```

## 控制器之间共享数据
 * 使用服务。

## 参考资料
 * AngularJS 权威教程